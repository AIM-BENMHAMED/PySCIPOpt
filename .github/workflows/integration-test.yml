name: Integration test

on: [push]

jobs:
  Integrate-SCIPOptSuite-with-PySCIPOpt:
    runs-on: ubuntu-18.04
    strategy:
      fail-fast: true
      matrix:
        python-version: 3.9
    env:
      version: 7.0.3
    steps:
    - uses: actions/checkout@v2
    - name: Set up Python ${{ matrix.python-version }}
      uses: actions/setup-python@v2
      with:
        python-version: ${{ matrix.python-version }}
    - name: SCIPOptSuite installation
      run: |
        wget --quiet --no-check-certificate https://scipopt.org/download/release/SCIPOptSuite-${{ env.version }}-Linux-ubuntu.deb
        sudo apt-get update && sudo apt install -y ./SCIPOptSuite-${{ env.version }}-Linux-ubuntu.deb
    - name: Install dependencies
      run: |
        python -m pip install --upgrade pip
        pip install cython networkx pytest-cov
    - name: Install PySCIPOpt
        pip install .
    - name: Run pyscipopt tests
      run: |
        ./py.test

